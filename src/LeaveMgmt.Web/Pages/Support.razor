@page "/support"
@inject UserService Users

<MudPaper Class="pa-4">
    <div class="page-title">
        <MudIcon Icon="@Icons.Material.Filled.SupportAgent" />
        <MudText Typo="Typo.h5">Support</MudText>
    </div>

    <MudCard>
        <MudCardContent>
            @if (_members is null)
            {
                <MudProgressLinear Indeterminate="true" />
            }
            else if (_members.Count == 0)
            {
                <MudAlert Severity="Severity.Info" Variant="Variant.Filled">
                    No support members returned by API.
                </MudAlert>
            }
            else
            {
                <MudList T="string">
                    @foreach (var m in _members)
                    {
                        <MudListItem Icon="@Icons.Material.Filled.Person">
                            <MudText>@m.FullName</MudText>
                            <MudText Typo="Typo.caption">@m.Email</MudText>
                        </MudListItem>
                    }
                </MudList>
            }
        </MudCardContent>
    </MudCard>
</MudPaper>

@code {
    private List<SupportMemberDto>? _members;
    protected override async Task OnInitializedAsync() => _members = await Users.GetSupportMembersAsync();
}
